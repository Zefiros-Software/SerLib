sudo: required
language: generic
matrix:
  include:
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=coverage
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=5
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=5
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=5
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=zpm
    - GCC_VERSION=5
global:
  env:
  - PROJECT=SerLib
  - PROJECT_DIRECTORY=serialisation
install:
- source /dev/stdin <<< "$(curl -s https://raw.githubusercontent.com/Zefiros-Software/ZPM/features/refactor/script/install-zpm.sh)"
script:
- zpm run build-ci-library
after_success:
- zpm run deploy-ci-library
notifications:
  slack:
    secure: g2fGF0kAuf7bjbSAY3BWocjEJYdSvBQrA2z8NypswU2V06zxXSIMPV5G0FVbVv712XTkQt70wWvwEDkKXctrhoP61nPOA1+95uCutruXCZtm98N7wC2RaZrWpbgzi3IEN+8NdqsnTyZrzP0rpc8jVT/6kCZ3qBJM2J35U3maK0obdnqDbsdWm+QWrW3q4PAfg3YqMtnBWkCQ6KgRvO/JsBOIjcsPE8so9AYceJI+UPIe+8ll4S6lHE4DHrSovAYElx4G7L3TZQkpKvdW1R/InqsvWhnEdV6AKHx4GdjyoEWMxMvJnGAWR5LMGXaba682s+sZGQ05WcCE0b9cdrCdAMdDE6tCVaF2j+Jh+a/WDv2Y/rWlPoFgq0qoGS9ZXZpGqMTP0kaguMfW7vZUuL/guZ1MFJBzS3YPHyGEkJLQNtav5V9qLnv+2aDwo5Em4w9asIjW0FNnbyNpUIQOvSqjK++MUrRQhlvdDdpel3F9JwgfALQr4NWYuEEkQsSapR/LlLjQiUyja3P+vLuZDqGI2sYPOpCL3l/s3wHJxdOuzbI0TVebuTCZ2iFWlMpQqjeX2kB51jCZK0kqMGNhPfHUAvjnr4/soGR9pvFwzpOe4GNwgPhQVLl3PizCD8usHGk5C4uNRKp+/eB2G1di6wfKEZsZ/NGhAFmf5IpPctfIrmM=
