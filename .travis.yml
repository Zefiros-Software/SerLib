sudo: required
language: generic
matrix:
    include:
        # Use generic language for osx
        - os: osx
          osx_image: xcode8
          language: generic    
          env: TYPE=release ARCH=x86   
        - os: osx
          osx_image: xcode8
          language: generic   
          env: TYPE=debug ARCH=x86
        - os: osx
          osx_image: xcode8
          language: generic   
          env: TYPE=release ARCH=x86_64
        - os: osx
          osx_image: xcode8
          language: generic   
          env: TYPE=debug ARCH=x86_64
        # Use the built in venv for linux builds
        - os: linux
          dist: trusty
          env: TYPE=release ARCH=x86 VERSION=6
        - os: linux
          dist: trusty
          env: TYPE=debug ARCH=x86 VERSION=6
        - os: linux
          dist: trusty
          env: TYPE=release ARCH=x86_64 VERSION=6
        - os: linux
          dist: trusty
          env: TYPE=coverage ARCH=x86_64 VERSION=6
        - os: linux
          dist: trusty
          env: TYPE=debug ARCH=x86_64 VERSION=6
        - os: linux
          dist: trusty
          env: TYPE=release VERSION=5 ARCH=x86_64
        - os: linux
          dist: trusty
          env: TYPE=release VERSION=6 ARCH=x86_64
        - os: linux
          dist: trusty
          env: TYPE=zpm VERSION=6

install:
    - bash script/install-unix.sh
    - wget -O - https://raw.githubusercontent.com/Zefiros-Software/ZPM/master/script/install-zpm-travis.sh | bash
script:
    - bash script/travis-build.sh
after_success:
  - if [[ "$TRAVIS_OS_NAME" == "linux" && "$TYPE" = "coverage" ]]; then codecov; fi    
notifications:
    slack:
        secure: "Oxurj7gzfoYOYgzkavi07KiRSvYUEQ5bqtfjSYmmCvGqaI0Tz5NrOqhdmjdPm1uUYUdu+LNHm1rQiFYJsmOjatA6Na1u90yAQTsnCR3NZbqbyud+pBnz36fAsy/l4ItPVvfKhJJSgWFzXKJrTyjpjKrNe8bre7N9b2pSJfSnrtFbkrchwdIl3ikhfE7MO+w7XdibMRjN4asyWbTQoUtzE8DNXcQLhzYwbKKxQidpuir06ok6ZoaJb+YrXuNnoqzgg5RFy0zeFbBKnzx9HxHb/2Y9kzgDS6XTzZBVJJeLiVNFq7SXDbiomTw4CU2iPubJEdZHVDHNdGziskEzXyJxOJXuYRxX9vCFXzT+JLGLDlHN0AEA/bHhVjB/2TDRZsqSPzm+riwcJ/hPykzhsHM9Fmykp2gayTME3m+CfXivsmxaUxHi5PLkqVeJjlb2WQRDVd1ijEzqBmsyI8uALYZ9cIZ7PsboV/hu17rKeLF+rCesfnAxdW/FX1BdRQiNMMLy9bmdIJ/6Q4RXxaUMeoiFVPNG2UD41+ViFJDNK/pUUhRDQvDM+p3aTiTSlav6baufY/4+IMUsKIZ8QuMlHXSvMSLfkxD88yhSyavoDMpwcgcsT1222cVPpZ0cLxWmq9guN1BLgH871fj69hbVUDQABRybZ3CjYj7Ad7gijzA0WJ8="